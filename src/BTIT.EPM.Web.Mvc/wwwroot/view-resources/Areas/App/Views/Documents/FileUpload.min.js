$(function(){"use strict";var n=abp.services.app.documents,i=new app.ModalManager({viewUrl:abp.appPath+"App/Documents/ViewFileModal",modalClass:"ViewFileModal",modalSize:"modal-xl"}),t;$("#documentsList").on("click","#deleteDocumentBtn",function(){var i=$(this),t=i.data("id");t&&t!=""&&abp.message.confirm("",app.localize("AreYouSure"),function(r){r&&n.delete(t).done(function(){i.parents("li").remove();abp.notify.success(app.localize("SuccessfullyDeleted"))})})});$("#documentsList").on("click","#getDocumentBtn",function(){var r=$(this),t=r.data("id"),u=r.data("contentType");t&&t!=""&&n.getDocumentForView(t).done(function(n){console.log("res",n);let t=abp.appPath+"App/Documents/GetFile?documentId="+n.document.id+"&contentType="+n.document.contentType;i.open({fileUrl:t})})});t=abp.appPath+"App/Documents/UploadFile";$("#fileupload").fileupload({url:t,dataType:"json",maxFileSize:999e3,dropZone:$("#fileuploadForm2"),done:function(n,t){var i=t.result,u,r;i.success?(u=abp.appPath+"App/Documents/GetFile?documentId="+i.result.id+"&contentType="+i.result.contentType,r='<li><div class="files" style="max-height: 150px; overflow-y: auto; margin: 15px;"><a href = "'+u+'" download = "'+i.result.documentDescription+'" >'+i.result.documentDescription+"<\/a >",r=r+'<a id="getDocumentBtn" name="getDocumentBtn" href="javascript:void(0);" data-id="'+i.result.id+'" class="text-danger" style="padding-left: 300px;" >Preview<i class="fa fa-id-card" aria-hidden="true"><\/i><\/a>',r=r+'<a id="deleteDocumentBtn" name="deleteDocumentBtn" href="javascript:void(0);" data-id="'+i.result.id+'" class="pull-right text-danger" style="margin-right: 10px"><i class="fa fa-trash" aria-hidden="true"><\/i><\/a><\/div ><\/li>',$("#documentsList").append(r),$("#DocPaths").val(u),abp.notify.info(app.localize("SavedSuccessfully"))):abp.message.error(i.error.message)},progressall:function(n,t){var i=parseInt(t.loaded/t.total*100,10);$("#progress .progress-bar").css("width",i+"%")}}).prop("disabled",!$.support.fileInput).parent().addClass($.support.fileInput?undefined:"disabled")});